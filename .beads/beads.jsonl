{"id":"tocoe-0hc","title":"Implement an OpenLibrary scans browser to identify table of contents pages, for later OCRing","description":"## Overview\n\nImplement an OpenLibrary scans browser to identify table of contents pages, for later OCRing\n\n## Success Criteria\n\n- [ ] OpenLibrary book page images are browsable by users\n- [ ] Users can mark any number of specific pages (recording the direct URLs of their images) as containing tables of contents\n- [ ] Users can also check a box indicating \"no explicit table of contents\"\n- [ ] Toc entities start as new. Once TOC pages have been marked OR \"no explicit table of contents\" has been marked and the form submitted, change their status to 'pages_marked'\n\n## Background\n\nToc entities in status 'pages_marked' are ready for OCR or transcription of their tables of contents.\n\n## Scope\n\n**In Scope:**\n- New toc view\n- Edit toc view\n\n**Out of Scope:**\n- OCR process\n","design":"## Architecture\n\n[Describe the overall architecture and approach]\n\n## Components\n\n- Component 1: [description]\n- Component 2: [description]\n\n## Dependencies\n\n[List external dependencies or constraints]\n","acceptance_criteria":"- [ ] All child issues are completed\n- [ ] Integration tests pass\n- [ ] Documentation is updated\n- [ ] Code review completed\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T22:24:25.28820326+02:00","updated_at":"2025-11-27T00:47:16.903484724+02:00","closed_at":"2025-11-27T00:47:16.903484724+02:00","labels":["epic"]}
{"id":"tocoe-0xr","title":"Implement Library of Congress Subject Headings API client","description":"Create a service class (lib/subject_headings/lcsh_client.rb) to search Library of Congress Subject Headings. The client should support searching by keyword and return results with URI and label. Use the LoC Linked Data Service API (id.loc.gov). Include RSpec tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:43:57.094727722+02:00","updated_at":"2025-11-26T21:53:10.778841482+02:00","closed_at":"2025-11-26T21:53:10.778841482+02:00"}
{"id":"tocoe-142","title":"Implement Wikidata subject headings API client","description":"Create a service class (lib/subject_headings/wikidata_client.rb) to search Wikidata items. The client should support searching by keyword and return results with Wikidata URI (Q-number) and label. Use the Wikidata Query Service or Search API. Include RSpec tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:44:03.640334576+02:00","updated_at":"2025-11-26T21:54:49.702835498+02:00","closed_at":"2025-11-26T21:54:49.702835498+02:00"}
{"id":"tocoe-1vs","title":"Record when a Toc was marked transcribed and when it was marked verified.","description":"these timestamp fields should be updated during status change.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-27T05:48:42.17779107+02:00","updated_at":"2025-11-27T05:48:42.17779107+02:00"}
{"id":"tocoe-1xa","title":"ensure button text is legible throughout","description":"currently some buttons have light gray text over dark background","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:08:03.951713761+02:00","updated_at":"2025-11-27T05:34:52.945179177+02:00","closed_at":"2025-11-27T05:34:52.945179177+02:00"}
{"id":"tocoe-3dx","title":"Create Aboutnesses controller and routes","description":"Create app/controllers/aboutnesses_controller.rb with actions: index (list aboutnesses for an embodiment), new (select source and search), create (save selected aboutness), destroy (remove aboutness). Add routes to config/routes.rb. Nest routes under embodiments if appropriate. Include controller RSpec tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:44:11.809919119+02:00","updated_at":"2025-11-26T21:57:34.20072469+02:00","closed_at":"2025-11-26T21:57:34.20072469+02:00","dependencies":[{"issue_id":"tocoe-3dx","depends_on_id":"tocoe-ay7","type":"blocks","created_at":"2025-11-26T21:45:21.708786497+02:00","created_by":"daemon"}]}
{"id":"tocoe-3vg","title":"in tocs list, make the titles be the link to the toc, and remove the 'Show' link.","description":"Also, add an 'Actions' heading to the actions column in the table","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:05:52.64636669+02:00","updated_at":"2025-11-27T05:32:59.815618649+02:00","closed_at":"2025-11-27T05:32:59.815618649+02:00"}
{"id":"tocoe-421","title":"Write RSpec tests for scan browser functionality","description":"Write RSpec tests for:\n1. Model: toc_page_urls and no_explicit_toc validations\n2. Controller: browse_scans action, page marking, status transitions\n3. Integration: Full workflow from browsing to marking pages","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T22:33:41.575037704+02:00","updated_at":"2025-11-27T00:46:59.955176168+02:00","closed_at":"2025-11-27T00:46:59.955176168+02:00","dependencies":[{"issue_id":"tocoe-421","depends_on_id":"tocoe-n3z","type":"blocks","created_at":"2025-11-26T22:34:15.358001154+02:00","created_by":"daemon"},{"issue_id":"tocoe-421","depends_on_id":"tocoe-0hc","type":"parent-child","created_at":"2025-11-27T00:03:26.144194529+02:00","created_by":"daemon"}]}
{"id":"tocoe-4sx","title":"Update tocs/show view to restrict contributor/reviewer to admins and show names","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:47:13.996141292+02:00","updated_at":"2025-11-27T05:47:52.974081248+02:00","closed_at":"2025-11-27T05:47:52.974081248+02:00","dependencies":[{"issue_id":"tocoe-4sx","depends_on_id":"tocoe-i8x","type":"blocks","created_at":"2025-11-27T05:47:27.631592492+02:00","created_by":"daemon"}]}
{"id":"tocoe-6xq","title":"add to homepage a button to view existing Tocs","description":"By default, show Tocs with statuses other than verified.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T04:58:02.763495179+02:00","updated_at":"2025-11-27T05:03:34.720191887+02:00","closed_at":"2025-11-27T05:03:34.720191887+02:00"}
{"id":"tocoe-9uy","title":"add an admin flag and an editor flag to User model, both false by default","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:39:53.734133096+02:00","updated_at":"2025-11-27T05:44:28.709639984+02:00","closed_at":"2025-11-27T05:44:28.709639984+02:00"}
{"id":"tocoe-aj2","title":"Update tocs/index view to restrict contributor/reviewer to admins and show names","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:47:14.106955752+02:00","updated_at":"2025-11-27T05:48:11.347677854+02:00","closed_at":"2025-11-27T05:48:11.347677854+02:00","dependencies":[{"issue_id":"tocoe-aj2","depends_on_id":"tocoe-i8x","type":"blocks","created_at":"2025-11-27T05:47:27.749259322+02:00","created_by":"daemon"}]}
{"id":"tocoe-asb","title":"limit OCR results element height, and move 'paste to TOC textarea' button up near the 'attempt OCR' button","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T03:58:10.017156209+02:00","updated_at":"2025-11-27T03:59:24.436581352+02:00","closed_at":"2025-11-27T03:59:24.436581352+02:00"}
{"id":"tocoe-axh","title":"Create scan browser UI and controller actions","description":"Create:\n1. New controller action 'browse_scans' or similar to fetch and display page images\n2. View template with:\n   - Gallery/grid of page thumbnails\n   - Checkboxes to mark pages containing TOC\n   - Display page numbers\n   - 'No explicit table of contents' checkbox\n   - Submit button\n3. Handle AJAX or pagination for large books","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T22:33:31.194328528+02:00","updated_at":"2025-11-27T00:43:06.442871244+02:00","closed_at":"2025-11-27T00:43:06.442871244+02:00","dependencies":[{"issue_id":"tocoe-axh","depends_on_id":"tocoe-k7o","type":"blocks","created_at":"2025-11-26T22:34:15.244093347+02:00","created_by":"daemon"},{"issue_id":"tocoe-axh","depends_on_id":"tocoe-0hc","type":"parent-child","created_at":"2025-11-27T00:03:26.122691856+02:00","created_by":"daemon"}]}
{"id":"tocoe-ay7","title":"Create Aboutness model and migration","description":"Create the Aboutness model to link embodiments to subject headings. The model should have: embodiment_id (integer), subject_heading_uri (string), source_name (string - e.g., 'LCSH', 'Wikidata'), subject_heading_label (string - cached label for display). Include database migration, model file with associations, and RSpec tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:43:35.578000586+02:00","updated_at":"2025-11-26T21:49:04.003647376+02:00","closed_at":"2025-11-26T21:49:04.003647376+02:00"}
{"id":"tocoe-bbb","title":"Add a homepage view and require login to access any other view.","description":"The homepage should include a summary of the purpose of the project as explained here: https://meta.wikimedia.org/wiki/Massively-Multiplayer_Online_Bibliography","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T04:12:21.322100346+02:00","updated_at":"2025-11-27T04:36:05.345371157+02:00","closed_at":"2025-11-27T04:36:05.345371157+02:00"}
{"id":"tocoe-cau","title":"in Toc editing, add button confirming Toc is ready","description":"in Toc viewing of a Toc in 'pages_marked' status, add button confirming Toc is ready. Pressing it records the current user as the contributor (foreign key contributor_id) and changes the Toc status to 'transcribed'.\nFor a Toc in 'transcribed' status, add a button verifying the transcription is correct. Pressing it records the current user as the verifier (foreign key verifier_id) and changes the Toc status to 'verified'.\n\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T04:06:11.925752923+02:00","updated_at":"2025-11-27T04:56:13.570205562+02:00","closed_at":"2025-11-27T04:56:13.570205562+02:00","dependencies":[{"issue_id":"tocoe-cau","depends_on_id":"tocoe-bbb","type":"blocks","created_at":"2025-11-27T04:13:13.614400608+02:00","created_by":"daemon"}]}
{"id":"tocoe-cuy","title":"only show the paste to TOC textarea button if and when OCR returned results","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T04:01:34.676667873+02:00","updated_at":"2025-11-27T04:03:04.270018493+02:00","closed_at":"2025-11-27T04:03:04.270018493+02:00"}
{"id":"tocoe-di9","title":"fix the failing spec in wikidata_client_spec","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:06:28.059050369+02:00","updated_at":"2025-11-27T05:29:45.752821356+02:00","closed_at":"2025-11-27T05:29:45.752821356+02:00"}
{"id":"tocoe-e9v","title":"Implement get_ocr_from_service with tesseract and REST API options","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T20:57:15.272198422+02:00","updated_at":"2025-11-26T21:04:46.470802007+02:00","closed_at":"2025-11-26T21:04:46.470802007+02:00"}
{"id":"tocoe-ec6","title":"Write RSpec tests for admin-only contributor/reviewer display","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:47:14.234005161+02:00","updated_at":"2025-11-27T05:50:49.572492077+02:00","closed_at":"2025-11-27T05:50:49.572492077+02:00","dependencies":[{"issue_id":"tocoe-ec6","depends_on_id":"tocoe-i8x","type":"blocks","created_at":"2025-11-27T05:47:27.871808519+02:00","created_by":"daemon"}]}
{"id":"tocoe-enb","title":"Implement associating embodiments with aboutnesses","description":"Implement a view allowing the user to associate a selected Embodiment with any number of Aboutnesses. Aboutnesses are entities linking one embodiment ID to one subject heading ID from one subject heading source.\n\nFor example, the book Moby Dick could be associated with a subject heading \"Whales\" from the source \"Library of Congress Subject Headings\", identified by the URI: https://lccn.loc.gov/sh85146357\n\nOffer the user a selection of cataloging sources, including for a start: 1. Library of Congress Subject Headings and 2. Wikidata items\n\nOnce a user selects a source, allow the user to input a search string, run the search against the cataloging source, and offer results for the user to select. Once the user makes a selection, create an Aboutness entity recording the link between the embodiment and the subject heading.\n","design":"## Architecture\n\n[Describe the overall architecture and approach]\n\n## Components\n\n- Component 1: [description]\n- Component 2: [description]\n\n## Dependencies\n\n[List external dependencies or constraints]\n","acceptance_criteria":"- [ ] All child issues are completed\n- [ ] Integration tests pass\n- [ ] Documentation is updated\n- [ ] Code review completed\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-26T21:03:11.615661878+02:00","updated_at":"2025-11-26T22:00:05.594511487+02:00","closed_at":"2025-11-26T22:00:05.594511487+02:00","labels":["epic"],"dependencies":[{"issue_id":"tocoe-enb","depends_on_id":"tocoe-ay7","type":"blocks","created_at":"2025-11-26T21:45:21.262053478+02:00","created_by":"daemon"},{"issue_id":"tocoe-enb","depends_on_id":"tocoe-0xr","type":"blocks","created_at":"2025-11-26T21:45:21.297686241+02:00","created_by":"daemon"},{"issue_id":"tocoe-enb","depends_on_id":"tocoe-142","type":"blocks","created_at":"2025-11-26T21:45:21.336632315+02:00","created_by":"daemon"},{"issue_id":"tocoe-enb","depends_on_id":"tocoe-3dx","type":"blocks","created_at":"2025-11-26T21:45:21.37220909+02:00","created_by":"daemon"},{"issue_id":"tocoe-enb","depends_on_id":"tocoe-ubh","type":"blocks","created_at":"2025-11-26T21:45:21.410281385+02:00","created_by":"daemon"},{"issue_id":"tocoe-enb","depends_on_id":"tocoe-f93","type":"blocks","created_at":"2025-11-26T21:45:21.445593398+02:00","created_by":"daemon"}]}
{"id":"tocoe-f93","title":"Add aboutness management to embodiment/manifestation views","description":"Integrate the aboutness UI into existing manifestation or embodiment detail views. Add a section to display and manage aboutnesses for a selected embodiment. Include links to add/remove aboutnesses. Update existing views to incorporate the new functionality.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:44:26.153158828+02:00","updated_at":"2025-11-26T21:59:47.435454099+02:00","closed_at":"2025-11-26T21:59:47.435454099+02:00","dependencies":[{"issue_id":"tocoe-f93","depends_on_id":"tocoe-ubh","type":"blocks","created_at":"2025-11-26T21:45:21.858712591+02:00","created_by":"daemon"}]}
{"id":"tocoe-i8x","title":"only show contributor and verifier information to admins","description":"when showing the information, show the user's name rather than the ID of the foreign key","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:40:31.177234445+02:00","updated_at":"2025-11-27T05:50:49.68211291+02:00","closed_at":"2025-11-27T05:50:49.68211291+02:00","dependencies":[{"issue_id":"tocoe-i8x","depends_on_id":"tocoe-9uy","type":"blocks","created_at":"2025-11-27T05:40:41.966636113+02:00","created_by":"daemon"}]}
{"id":"tocoe-k7o","title":"Research and implement OpenLibrary/IA scans API integration","description":"Research how to:\n1. Get Internet Archive identifier from OpenLibrary book ID\n2. Fetch list of available page scans\n3. Construct image URLs for each page\n4. Handle pagination/metadata\n\nAdd methods to OpenLibrary::Client or new service class.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T22:33:23.117913003+02:00","updated_at":"2025-11-27T00:11:27.825208518+02:00","closed_at":"2025-11-27T00:11:27.825208518+02:00","dependencies":[{"issue_id":"tocoe-k7o","depends_on_id":"tocoe-0hc","type":"parent-child","created_at":"2025-11-27T00:03:26.111495749+02:00","created_by":"daemon"}]}
{"id":"tocoe-mc8","title":"Prepare for I18n of app","description":"extract all string literals into standard Rails I18n YAML files for English. Also update the AGENTS.md and CLAUDE.md and Copilot instruction files to avoid user-visible messages as string literals in any future code, instead adding entries to the locale files and using those.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:10:47.859087127+02:00","updated_at":"2025-11-27T05:26:55.034161898+02:00","closed_at":"2025-11-27T05:26:55.034161898+02:00"}
{"id":"tocoe-n3z","title":"Update TOC controller to handle page marking and status transitions","description":"Update TocsController to:\n1. Save marked page URLs to toc.toc_page_urls\n2. Save no_explicit_toc flag\n3. Transition toc.status from 'new' to 'pages_marked' when form submitted\n4. Add validation: must have either marked pages OR no_explicit_toc checked","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T22:33:36.563687967+02:00","updated_at":"2025-11-27T00:43:50.952084047+02:00","closed_at":"2025-11-27T00:43:50.952084047+02:00","dependencies":[{"issue_id":"tocoe-n3z","depends_on_id":"tocoe-p60","type":"blocks","created_at":"2025-11-26T22:34:15.282182423+02:00","created_by":"daemon"},{"issue_id":"tocoe-n3z","depends_on_id":"tocoe-axh","type":"blocks","created_at":"2025-11-26T22:34:15.321239353+02:00","created_by":"daemon"},{"issue_id":"tocoe-n3z","depends_on_id":"tocoe-0hc","type":"parent-child","created_at":"2025-11-27T00:03:26.133395786+02:00","created_by":"daemon"}]}
{"id":"tocoe-nzu","title":"in publication search, add a multi-select button","description":"clicking multi-select should add a checkbox next to each result, allowing the user to mark several results. When any results are marked, show a \"make ToCs for selected!\" button at the top of the list. Clicking it should create Toc entities for all these publications (in status 'empty') and then redirect to the Tocs list (defaulting to showing Tocs in status 'empty', sorted by descending date of creation.\n\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:00:20.548319209+02:00","updated_at":"2025-11-27T05:10:08.751053183+02:00","closed_at":"2025-11-27T05:10:08.751053183+02:00"}
{"id":"tocoe-o39","title":"allow the OAuth URLs to be accessed. The authentication hook in ApplicationController is preventing this.","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T04:47:58.571503611+02:00","updated_at":"2025-11-27T04:50:52.401072476+02:00","closed_at":"2025-11-27T04:50:52.401072476+02:00"}
{"id":"tocoe-p60","title":"Add database fields for TOC page URLs","description":"Add migration to add fields to tocs table:\n- toc_page_urls (text) - to store array/list of marked page image URLs\n- no_explicit_toc (boolean) - checkbox for 'no explicit table of contents'","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T22:33:17.269329449+02:00","updated_at":"2025-11-27T00:07:58.104484596+02:00","closed_at":"2025-11-27T00:07:58.104484596+02:00","dependencies":[{"issue_id":"tocoe-p60","depends_on_id":"tocoe-0hc","type":"parent-child","created_at":"2025-11-27T00:03:26.091155704+02:00","created_by":"daemon"}]}
{"id":"tocoe-plg","title":"Update CLAUDE.md with RSpec testing requirements","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:06:58.965308448+02:00","updated_at":"2025-11-26T21:08:03.021110714+02:00","closed_at":"2025-11-26T21:08:03.021110714+02:00"}
{"id":"tocoe-pt4","title":"Add contributor and reviewer associations to Toc model","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-27T05:47:13.859409461+02:00","updated_at":"2025-11-27T05:47:42.372731993+02:00","closed_at":"2025-11-27T05:47:42.372731993+02:00","dependencies":[{"issue_id":"tocoe-pt4","depends_on_id":"tocoe-i8x","type":"blocks","created_at":"2025-11-27T05:47:27.5270633+02:00","created_by":"daemon"}]}
{"id":"tocoe-ubg","title":"indicate work in progress when OCRing","description":"## Feature Request\n\nwhen selecting \"Attempt OCR\", disable the button and add a message indicating the system is working on it. When the results are ready, re-enable the button.\n\nAlso, in the display of the results, use a PRE tag to preserve the line breaks.\n \n","design":"## Technical Design\n\n[Detailed technical approach]\n\n## API Changes\n\n[New commands, flags, or APIs]\n\n## Data Model Changes\n\n[Database schema changes if any]\n\n## Implementation Notes\n\n- Note 1\n- Note 2\n\n## Testing Strategy\n\n- Unit tests: [scope]\n- Integration tests: [scope]\n- Manual testing: [steps]\n","acceptance_criteria":"- [ ] Feature implements all described use cases\n- [ ] All tests pass\n- [ ] Documentation updated (README, commands)\n- [ ] Examples added if applicable\n- [ ] No performance regressions\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-27T03:49:25.303516201+02:00","updated_at":"2025-11-27T03:56:08.539207+02:00","closed_at":"2025-11-27T03:56:08.539207+02:00","labels":["feature"]}
{"id":"tocoe-ubh","title":"Create aboutnesses UI views","description":"Create views in app/views/aboutnesses/: 1) _list.html.haml partial to show existing aboutnesses for an embodiment, 2) new.html.haml with source selection dropdown and search form, 3) _search_results.html.haml partial to display search results with selection. Use AJAX for search interactions. Include Haml templates following existing app patterns.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-26T21:44:19.482376115+02:00","updated_at":"2025-11-26T21:58:53.205650544+02:00","closed_at":"2025-11-26T21:58:53.205650544+02:00","dependencies":[{"issue_id":"tocoe-ubh","depends_on_id":"tocoe-3dx","type":"blocks","created_at":"2025-11-26T21:45:21.748417901+02:00","created_by":"daemon"},{"issue_id":"tocoe-ubh","depends_on_id":"tocoe-0xr","type":"blocks","created_at":"2025-11-26T21:45:21.785609954+02:00","created_by":"daemon"},{"issue_id":"tocoe-ubh","depends_on_id":"tocoe-142","type":"blocks","created_at":"2025-11-26T21:45:21.821927043+02:00","created_by":"daemon"}]}
{"id":"tocoe-w66","title":"Enhance OpenLibrary search with title/author filtering and full-text focus","description":"","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-26T20:06:29.009705956+02:00","updated_at":"2025-11-26T20:14:35.934736506+02:00","closed_at":"2025-11-26T20:14:35.934736506+02:00"}
{"id":"tocoe-ybk","title":"Fix OpenLibrary edition key access in search results","description":"","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-26T20:27:23.966062498+02:00","updated_at":"2025-11-26T20:29:46.000588517+02:00","closed_at":"2025-11-26T20:29:46.000588517+02:00"}

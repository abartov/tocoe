.dashboard-container
  .dashboard-header
    %h1
      = t('dashboard.welcome', name: current_user.email.split('@').first.titleize)
    %p
      = t('dashboard.subtitle')

  .stats-grid
    .stat-card
      .stat-number.primary
        = @stats[:total]
      .stat-label
        = t('dashboard.stats.total_tocs')

    .stat-card
      .stat-number.success
        = @stats[:verified]
      .stat-label
        = t('dashboard.stats.verified')

    .stat-card
      .stat-number.warning
        = @stats[:needs_work]
      .stat-label
        = t('dashboard.stats.needs_work')

    .stat-card
      .stat-number.purple
        = @stats[:contributors]
      .stat-label
        = t('dashboard.stats.contributors')

  .dashboard-grid
    .dashboard-section
      %h2
        = t('dashboard.my_recent_tocs')

      - if @my_tocs.any?
        - @my_tocs.each do |toc|
          .toc-card
            .toc-header
              %h3
                = link_to toc.title, toc
              %span.status-badge{class: "status-#{toc.status}"}
                = toc.status.titleize
            %p
              = t('dashboard.updated')
              = time_ago_in_words(toc.updated_at)
              = t('dashboard.ago')

        .text-center
          = link_to t('dashboard.view_all_my_tocs'), tocs_path, class: 'btn btn-primary'

      - else
        .empty-state
          %p üìö You haven't created any TOCs yet
          %p
            = link_to t('dashboard.start_contributing'), publications_search_path, class: 'btn btn-primary'

      - if @my_contribution_stats[:total] > 0
        %h3
          = t('dashboard.my_contribution_stats')

        .my-stats-grid
          .my-stat-card
            .my-stat-number
              = @my_contribution_stats[:total]
            .my-stat-label
              = t('dashboard.stats.my_total')

          .my-stat-card
            .my-stat-number
              = @my_contribution_stats[:verified]
            .my-stat-label
              = t('dashboard.stats.my_verified')

          .my-stat-card
            .my-stat-number
              = @my_contribution_stats[:in_progress]
            .my-stat-label
              = t('dashboard.stats.my_in_progress')

    .dashboard-section
      %h2
        = t('dashboard.quick_actions')

      .quick-actions
        = link_to publications_search_path, class: 'action-button' do
          .action-icon üîç
          .action-title
            = t('dashboard.actions.search_books')
          .action-description
            = t('dashboard.actions.search_description')

        = link_to tocs_path, class: 'action-button' do
          .action-icon ‚úì
          .action-title
            = t('dashboard.actions.verify_tocs')
          .action-description
            = t('dashboard.actions.verify_description')

      %h3
        = t('dashboard.needs_attention')

      - if @needs_verification.any?
        - @needs_verification.each do |toc|
          .mini-toc-card
            %h4
              = link_to toc.title, toc
            %p
              = t('dashboard.ready_to_verify')
      - else
        %p
          = t('dashboard.no_verification_needed')

      - if @recent_community_activity.any?
        %h3
          = t('dashboard.recent_community_activity')

        .activity-feed
          - @recent_community_activity.each do |toc|
            .activity-item
              .activity-title
                = link_to toc.title, toc
              .activity-meta
                = t('dashboard.activity.verified_by', reviewer: toc.reviewer&.email || 'Unknown')
                = time_ago_in_words(toc.verified_at)
                = t('dashboard.ago')

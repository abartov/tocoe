.toc-body-section
  .toc-body-controls
    = button_tag(type: 'button', id: 'magic_trim', class: 'btn btn-primary') do
      %span.glyphicon.glyphicon-scissors
      = t('tocs.form.magic_trim_button')
    = help_tooltip t('tocs.form.magic_trim_tooltip'), placement: 'right'
    %span.help-block= t('tocs.form.magic_trim_help')

  .form-group
    = f.label t('tocs.form.toc_body_label'), class: 'control-label'
    = f.text_area :toc_body, rows: 20, id: 'toc_area', class: 'form-control toc-textarea', placeholder: t('tocs.form.toc_body_placeholder')

  .markdown-help-section
    .help-header
      %h4 ðŸ“– #{t('tocs.form.markdown_help_title')}
      %button.btn.btn-sm.btn-default{type: 'button', 'data-toggle' => 'collapse', 'data-target' => '#markdownHelp'}
        = t('tocs.form.show_hide_help')

    .collapse#markdownHelp
      .markdown-help{style: 'background: #f7fafc; padding: 1rem; border-radius: 6px; border: 2px solid #e2e8f0; font-size: 0.85rem;'}
        %div{style: 'line-height: 1.6;'}
          %p{style: 'margin-bottom: 0.5rem;'}
            %code{style: 'background: #edf2f7; padding: 0.2rem 0.4rem; border-radius: 3px;'}
              = "# Title"
            %span{style: 'color: #4a5568;'}= " - #{t('tocs.form.markdown_help.top_level')}"
          %p{style: 'margin-bottom: 0.5rem;'}
            %code{style: 'background: #edf2f7; padding: 0.2rem 0.4rem; border-radius: 3px;'}
              = "## Title"
            %span{style: 'color: #4a5568;'}= " - #{t('tocs.form.markdown_help.nested')}"
          %p{style: 'margin-bottom: 0.5rem;'}
            %code{style: 'background: #edf2f7; padding: 0.2rem 0.4rem; border-radius: 3px;'}
              = "# Title || Author"
            %span{style: 'color: #4a5568;'}= " - #{t('tocs.form.markdown_help.with_author')}"
          %p{style: 'margin-bottom: 0.5rem;'}
            %code{style: 'background: #edf2f7; padding: 0.2rem 0.4rem; border-radius: 3px;'}
              = "# Title || Author1; Author2"
            %span{style: 'color: #4a5568;'}= " - #{t('tocs.form.markdown_help.multiple_authors')}"
          %p{style: 'margin-bottom: 0;'}
            %code{style: 'background: #edf2f7; padding: 0.2rem 0.4rem; border-radius: 3px;'}
              = "# Section /"
            %span{style: 'color: #4a5568;'}= " - #{t('tocs.form.markdown_help.section_heading')}"
          %hr{style: 'margin: 0.75rem 0; border: 0; border-top: 1px solid #e2e8f0;'}
          %p{style: 'margin-bottom: 0.5rem; font-weight: 600; color: #2d3748;'}
            = "#{t('tocs.form.markdown_help.example')}:"
          %pre{style: 'background: #edf2f7; padding: 0.5rem; border-radius: 3px; font-size: 0.75rem; margin: 0;'}
            = "# Book Title || Author Name\n## Chapter One\n## Chapter Two\n# Part Two /\n## Chapter Three"
